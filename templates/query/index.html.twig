{% extends 'layout.html.twig' %}
    {% block content_header %}
        <section class="content-header">
            <h1>
                <i class="fa fa-list" aria-hidden="true"></i> List Queries
            </h1>
            <ol class="breadcrumb">
                <li><a href="{{ url('query_index') }}"><i class="fa fa-dashboard"></i> Queries</a></li>
                <li class="active">List</li>
            </ol>
        </section>
    {% endblock %}

{% block content %}
     <div class="col-md-12 col-sm-6 col-xs-12">
         <div class="box box-primary">

             <div class="x_content">
                 {#{% include 'user/filter.html.twig' %}#}
                 <div class="box-body">

                     <table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap table-hover" cellspacing="0">
                         <thead>
                         <tr>
                             {% set route = app.request.attributes.get('_route') %}
                             {% set params = app.request.attributes.get('_route_params')|merge(app.request.query.all) %}


                             {% if params.order is defined and params.sort == 'id' and params.order == 'DESC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'id',order:'ASC'})) }}">Query Id <i class="fa fa-fw fa-sort-asc"></i></a></th>
                             {% elseif params.order is defined and params.sort == 'id' and params.order == 'ASC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'id', order:'DESC'})) }}">Query Id <i class="fa fa-fw fa-sort-desc"></i></a></th>
                             {% else %}
                                 <th><a href = "{{ url(route, params|merge({sort:'id',order:'ASC'})) }}">Query Id <i class="fa fa-fw fa-sort"></i></a></th>
                             {% endif %}


                             {% if params.order is defined and params.sort == 'name' and params.order == 'DESC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'name',order:'ASC'})) }}">Name <i class="fa fa-fw fa-sort-asc"></i></a></th>
                             {% elseif params.order is defined and params.sort == 'name' and params.order == 'ASC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'name', order:'DESC'})) }}">Name <i class="fa fa-fw fa-sort-desc"></i></a></th>
                             {% else %}
                                 <th><a href = "{{ url(route, params|merge({sort:'name',order:'ASC'})) }}">Name <i class="fa fa-fw fa-sort"></i></a></th>
                             {% endif %}

                             {% if params.order is defined and params.sort == 'manager' and params.order == 'DESC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'manager',order:'ASC'})) }}">Manager <i class="fa fa-fw fa-sort-asc"></i></a></th>
                             {% elseif params.order is defined and params.sort == 'manager' and params.order == 'ASC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'manager', order:'DESC'})) }}">Manager <i class="fa fa-fw fa-sort-desc"></i></a></th>
                             {% else %}
                                 <th><a href = "{{ url(route, params|merge({sort:'manager',order:'ASC'})) }}">Manager <i class="fa fa-fw fa-sort"></i></a></th>
                             {% endif %}

                             {% if params.order is defined and params.sort == 'sport' and params.order == 'DESC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'sport',order:'ASC'})) }}">Sport <i class="fa fa-fw fa-sort-asc"></i></a></th>
                             {% elseif params.order is defined and params.sort == 'sport' and params.order == 'ASC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'sport', order:'DESC'})) }}">Sport <i class="fa fa-fw fa-sort-desc"></i></a></th>
                             {% else %}
                                 <th><a href = "{{ url(route, params|merge({sort:'sport',order:'ASC'})) }}">Sport <i class="fa fa-fw fa-sort"></i></a></th>
                             {% endif %}

                             {% if params.order is defined and params.sort == 'country' and params.order == 'DESC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'country',order:'ASC'})) }}">Country <i class="fa fa-fw fa-sort-asc"></i></a></th>
                             {% elseif params.order is defined and params.sort == 'country' and params.order == 'ASC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'country', order:'DESC'})) }}">Country <i class="fa fa-fw fa-sort-desc"></i></a></th>
                             {% else %}
                                 <th><a href = "{{ url(route, params|merge({sort:'country',order:'ASC'})) }}">Country <i class="fa fa-fw fa-sort"></i></a></th>
                             {% endif %}

                             {% if params.order is defined and params.sort == 'arrival' and params.order == 'DESC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'arrival',order:'ASC'})) }}">Arrival <i class="fa fa-fw fa-sort-asc"></i></a></th>
                             {% elseif params.order is defined and params.sort == 'arrival' and params.order == 'ASC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'arrival', order:'DESC'})) }}">Arrival <i class="fa fa-fw fa-sort-desc"></i></a></th>
                             {% else %}
                                 <th><a href = "{{ url(route, params|merge({sort:'arrival',order:'ASC'})) }}">Arrival <i class="fa fa-fw fa-sort"></i></a></th>
                             {% endif %}

                             {% if params.order is defined and params.sort == 'departure' and params.order == 'DESC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'departure',order:'ASC'})) }}">Departure <i class="fa fa-fw fa-sort-asc"></i></a></th>
                             {% elseif params.order is defined and params.sort == 'departure' and params.order == 'ASC' %}
                                 <th><a href = "{{ url(route, params|merge({sort:'departure', order:'DESC'})) }}">Departure <i class="fa fa-fw fa-sort-desc"></i></a></th>
                             {% else %}
                                 <th><a href = "{{ url(route, params|merge({sort:'departure',order:'ASC'})) }}">Departure <i class="fa fa-fw fa-sort"></i></a></th>
                             {% endif %}


                             <th>Manage</th>

                         </tr>
                         </thead>
                         <tbody>
                         {% if queries|length > 0%}
                             {% for query in queries %}
                                 {% if query.account %}
                                 <tr>
                                     <td>
                                         <a href="{{ path('query_show', { 'id': query.id }) }}">{{ query.id }}</a>
                                     </td>
                                     <td>{{ query.account.name }}</td>
                                     <td>{{ query.account.manager }}</td>
                                     <td>{{ query.account.sport }}</td>
                                     <td>{{ countries[query.account.country] }}</td>
                                     <td>{{ query.dateOfArrival|date('Y-m-d H:i') }}</td>
                                     <td>{{ query.dateOfDeparture|date('Y-m-d H:i') }}</td>
                                     <td class="actions">
                                         <a href="{{ path('query_show', { 'id': query.id }) }}" class="btn-sm bg-orange no-wrap">
                                             <i class="fa fa-user"></i><span class="hidden-xs hidden-sm"> View</span>
                                         </a>
                                     </td>
                                 </tr>
                                 {% endif %}
                             {% endfor %}
                         {% endif %}
                         </tbody>
                     </table>
                 </div>

                 {% include 'paginator.html.twig' with { 'paginator': queries } only %}
             </div>
         </div>
     </div>

 {% endblock %}
