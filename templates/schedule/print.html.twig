{% extends 'layout.html.twig' %}

{% block body %}
<div class="container">
    <div class="row">
        <div class="header text-center" style=" margin-top: 20px;">
            <img src="/images/Top%20Aqualife.png" class="img-responsive" style=" margin: 0 auto;"/>
        </div>
    </div>
    <div class="row">
            <h2>{{ facility.name }} - {{ date|date("d-m-Y") }}</h2>
            <div class="">
                <div class="box box-primary">
                    <div class="box-body no-padding">
                        <!-- THE CALENDAR -->
                        <div id="calendar">
                            <table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap table-hover" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th style="background-color:lightblue;"></th>
                                        {% if facility.type == constant('App\\Entity\\Facility::TYPE_POOL') %}
                                            {% for i in 1..8 %}
                                                <th>{{ i }}</th>
                                            {% endfor %}
                                        {% else %}
                                            <th>All</th>
                                            <th>1/2</th>
                                            <th>1/3</th>
                                        {% endif %}
                                    </tr>
                                </thead>
                                <tbody>
                                {% if schedule|length > 0%}
                                    {% for hour in 7..20 %}
                                    <tr>
                                        <td style="background-color:lightblue;">{{ hour }}:00</td>
                                        {% if facility.type == constant('App\\Entity\\Facility::TYPE_POOL') %}
                                            {% for i in 1..8 %}
                                                {% if schedule[i] is defined %}
                                                <td>
                                                    {% for fromTime,arr in schedule[i] %}
                                                        {%
                                                        if (fromTime[:2] <= hour and hour == arr.endTime[:2] and arr.endTime[3:] != '00')
                                                        or (fromTime[:2] <= hour and hour < arr.endTime[:2])
                                                        %}
                                                        <div>{{ arr.desc }}</div>
                                                        {% endif %}
                                                    {% endfor %}
                                                </td>
                                                {% else %}
                                                    <td> - </td>
                                                {% endif %}
                                            {% endfor %}
                                        {% else %}
                                            {% if schedule['All'] is defined %}
                                                <td>
                                                    {% for fromTime,arr in schedule['All'] %}
                                                        {%
                                                        if (fromTime[:2] <= hour and hour == arr.endTime[:2] and arr.endTime[3:] != '00')
                                                        or (fromTime[:2] <= hour and hour < arr.endTime[:2])
                                                        %}
                                                        <div>{{ arr.desc }}</div>
                                                        {% endif %}
                                                    {% endfor %}
                                                </td>
                                            {% else %}
                                                <td> - </td>
                                            {% endif %}
                                            {% if schedule['1/2'] is defined %}
                                                <td>
                                                    {% for fromTime,arr in schedule['All'] %}
                                                        {%
                                                        if (fromTime[:2] <= hour and hour == arr.endTime[:2] and arr.endTime[3:] != '00')
                                                        or (fromTime[:2] <= hour and hour < arr.endTime[:2])
                                                        %}
                                                        <div>{{ arr.desc }}</div>
                                                        {% endif %}
                                                    {% endfor %}
                                                </td>
                                            {% else %}
                                                <td> - </td>
                                            {% endif %}
                                            {% if schedule['1/3'] is defined %}
                                                <td>
                                                    {% for fromTime,arr in schedule['All'] %}
                                                        {%
                                                        if (fromTime[:2] <= hour and hour == arr.endTime[:2] and arr.endTime[3:] != '00')
                                                        or (fromTime[:2] <= hour and hour < arr.endTime[:2])
                                                        %}
                                                        <div>{{ arr.desc }}</div>
                                                        {% endif %}
                                                    {% endfor %}
                                                </td>
                                            {% else %}
                                                <td> - </td>
                                            {% endif %}
                                        {% endif %}
                                    </tr>
                                    {% endfor %}
                                {% else %}
                                    <h1>No results</h1>
                                {% endif %}
                                </tbody>
                            </table>

                        </div>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /. box -->
            </div>
            <!-- /.col -->

    </div>
</div>


{% endblock %}