{% extends 'layout.html.twig' %}
    {% block content_header %}
        <section class="content-header">
            <h1>
                <i class="fa fa-list" aria-hidden="true"></i> List Schedule
            </h1>
            <ol class="breadcrumb">
                <li><a href="{{ url('schedule_index') }}"><i class="fa fa-dashboard"></i> Schedule</a></li>
                <li class="active">List</li>
            </ol>
        </section>
    {% endblock %}

{% block content %}
     <div class="col-md-12 col-sm-6 col-xs-12">
         <div class="box box-primary">

             <div class="x_content">
                 {% include 'schedule/filter.html.twig' %}
                 <div class="box-body">
                     {% if schedules|length > 0%}
                        {{ dump(schedules) }}
                         <table class="table table-bordered table-striped dt-responsive nowrap table-hover">
                             <thead>
                             <tr>
                                 <th>Date</th>
                                 <th>Time</th>
                             </tr>
                             </thead>
                             <tbody>
                                 {% for day,array in schedules %}
                                 <tr>
                                     <td>{{ day }}</td>
                                     <td>
                                         {% if array %}
                                             {% for schedule in array %}
                                                 <div class="row">
                                                     <div class="col-md-6">
                                                         {{ schedule.id }}
                                                     </div>
                                                 </div>
                                             {% endfor %}
                                         {% endif %}
                                     </td>
                                 </tr>
                                {% endfor %}
                             </tbody>
                         </table>

                     {% endif %}
                 </div>

             </div>
         </div>
     </div>


    <!-- Main content -->
    <section class="content">
        <div class="row">

            <div class="col-md-6">
                <div class="box box-primary">
                    <div class="box-body no-padding">
                        <!-- THE CALENDAR -->
                        <div id="calendar"></div>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /. box -->
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->
    </section>
    <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

 {% endblock %}


  {% block javascripts %}
      {{ parent() }}

      <!-- fullCalendar -->
      <script src="{{ url('app_homepage') }}bower_components/moment/moment.js"></script>
      <script src="{{ url('app_homepage') }}bower_components/fullcalendar/dist/fullcalendar.min.js"></script>


      <script>
          $(function () {

              /* initialize the external events
               -----------------------------------------------------------------*/
              function init_events(ele) {
                  ele.each(function () {

                      // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
                      // it doesn't need to have a start or end
                      var eventObject = {
                          title: $.trim($(this).text()) // use the element's text as the event title
                      }

                      // store the Event Object in the DOM element so we can get to it later
                      $(this).data('eventObject', eventObject)

                      // make the event draggable using jQuery UI
                      $(this).draggable({
                          zIndex        : 1070,
                          revert        : true, // will cause the event to go back to its
                          revertDuration: 0  //  original position after the drag
                      })

                  })
              }

              init_events($('#external-events div.external-event'))

              /* initialize the calendar
               -----------------------------------------------------------------*/
              //Date for the calendar events (dummy data)
              var date = new Date()
              var d    = date.getDate(),
                  m    = date.getMonth(),
                  y    = date.getFullYear()
              $('#calendar').fullCalendar({
                  header    : {
                      left  : 'prev,next today',
                      center: 'title',
                      right : 'month,agendaWeek,agendaDay'
                  },
                  buttonText: {
                      // today: 'today',
                      // month: 'month',
                      // week : 'week',
                      day  : 'day'
                  },
                  //Random default events
                  events    : [
                      {
                          title          : 'Meeting',
                          start          : new Date(y, m, d, 10, 30),
                          allDay         : false,
                          backgroundColor: '#0073b7', //Blue
                          borderColor    : '#0073b7' //Blue
                      },
                      {
                          title          : 'Lunch',
                          start          : new Date(y, m, d, 12, 0),
                          end            : new Date(y, m, d, 14, 30),
                          allDay         : false,
                          backgroundColor: '#00c0ef', //Info (aqua)
                          borderColor    : '#00c0ef' //Info (aqua)
                      }
                  ],
                  editable  : false,
                  droppable : false, // this allows things to be dropped onto the calendar !!!
                  // drop      : function (date, allDay) { // this function is called when something is dropped
                  //
                  //     // retrieve the dropped element's stored Event Object
                  //     var originalEventObject = $(this).data('eventObject')
                  //
                  //     // we need to copy it, so that multiple events don't have a reference to the same object
                  //     var copiedEventObject = $.extend({}, originalEventObject)

                      // assign it the date that was reported
                      // copiedEventObject.start           = date
                      // copiedEventObject.allDay          = allDay
                      // copiedEventObject.backgroundColor = $(this).css('background-color')
                      // copiedEventObject.borderColor     = $(this).css('border-color')

                      // render the event on the calendar
                      // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
                      // $('#calendar').fullCalendar('renderEvent', copiedEventObject, true)

                      // is the "remove after drop" checkbox checked?
                      // if ($('#drop-remove').is(':checked')) {
                      //     // if so, remove the element from the "Draggable Events" list
                      //     $(this).remove()
                      // }

                  // }
              })


          })
      </script>

      <script>
          $('.datepicker').datepicker({
              startDate: "today",
              setDate: new Date(),
              format: 'dd-mm-yyyy',
              orientation: "bottom auto",
              autoclose: true,
              todayHighlight: true
          });
      </script>

  {% endblock %}